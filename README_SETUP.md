# Flappy Bird 项目环境设置指南

## 概述

本指南将帮助你快速设置Flappy Bird项目的开发环境，包括创建必要的软引用和配置MCP插件。

## 前置要求

在运行设置脚本之前，请确保：

1. **Godot引擎已构建** - 在`godot_source`目录中运行`build.bat`
2. **Godot-MCP项目已下载** - 确保`D:\Godot\Godot-MCP\addons\godot_mcp`路径存在
3. **在正确的项目目录中** - 确保在`flappybirddemo`目录中运行脚本

## 快速设置

### 方法1：使用批处理脚本（推荐）

```cmd
# 在flappybirddemo目录中运行
setup_project.bat
```

### 方法2：使用PowerShell脚本

```powershell
# 在flappybirddemo目录中运行
.\setup_project.ps1
```

## 设置脚本功能

### 自动检查
- ✅ 验证项目文件完整性
- ✅ 检查Godot-MCP项目路径
- ✅ 检测已存在的软引用

### 智能处理
- 🔄 自动创建addons目录（如果不存在）
- 🔄 备份已存在的普通目录
- 🔄 更新已存在的软引用

### 软引用创建
- 🔗 优先尝试创建Junction（目录连接点）
- 🔗 备用方案：创建Symbolic Link（符号链接）
- 🔗 自动验证软引用有效性

### 完整性验证
- 📁 检查关键MCP插件文件
- 📁 验证启动脚本存在性
- 📁 提供详细的检查报告

## 设置流程

1. **项目验证** - 检查project.godot文件
2. **目录准备** - 创建或验证addons目录
3. **路径检查** - 验证Godot-MCP项目路径
4. **软引用管理** - 处理已存在的目录/链接
5. **创建软引用** - 建立目录连接
6. **验证完整性** - 检查关键文件
7. **完成设置** - 提供后续操作指导

## 软引用类型

### Junction（目录连接点）
- **优势**: 无需管理员权限，兼容性好
- **限制**: 仅支持本地路径，不支持网络路径
- **适用**: 大多数本地开发环境

### Symbolic Link（符号链接）
- **优势**: 支持网络路径，功能更强大
- **限制**: 需要管理员权限
- **适用**: 高级用户或需要网络路径的场景

## 故障排除

### 常见问题

#### 1. 找不到Godot-MCP项目
**错误信息**: `未找到 Godot-MCP 项目！`
**解决方案**: 
- 确保已下载Godot-MCP项目到`D:\Godot\`目录
- 或修改脚本中的`mcpPath`变量指向正确路径

#### 2. 软引用创建失败
**错误信息**: `软引用创建失败！`
**解决方案**:
- 以管理员身份运行脚本
- 检查目标路径是否存在
- 确保有足够的磁盘空间

#### 3. 权限不足
**错误信息**: `此操作需要管理员权限`
**解决方案**:
- 右键点击脚本，选择"以管理员身份运行"
- 或使用PowerShell管理员权限运行

### 手动创建软引用

如果自动脚本失败，可以手动创建：

```cmd
# 创建Junction（推荐）
mklink /D addons\godot_mcp D:\Godot\Godot-MCP\addons\godot_mcp

# 或创建Symbolic Link（需要管理员权限）
mklink /D addons\godot_mcp D:\Godot\Godot-MCP\addons\godot_mcp
```

## 设置完成后的操作

1. **启动项目**
   ```cmd
   run_flappybird.bat
   ```

2. **启用MCP插件**
   - 在Godot编辑器中，转到`项目 > 项目设置 > 插件`
   - 启用`Godot MCP`插件

3. **开始开发**
   - 编辑Flappy Bird游戏代码
   - 使用MCP功能进行AI辅助开发

## 重新设置

如需重新设置环境：

1. **删除软引用**
   ```cmd
   rmdir addons\godot_mcp
   ```

2. **重新运行设置脚本**
   ```cmd
   setup_project.bat
   ```

## 注意事项

- **路径依赖**: 脚本中的路径是硬编码的，如需修改请编辑脚本
- **权限要求**: 某些操作可能需要管理员权限
- **备份机制**: 脚本会自动备份已存在的目录
- **错误处理**: 脚本包含完整的错误处理和用户提示

## 技术支持

如果遇到问题：

1. 检查错误信息和控制台输出
2. 验证所有前置条件是否满足
3. 尝试手动创建软引用
4. 检查系统权限设置

---

*这些设置脚本将帮助你快速搭建Flappy Bird项目的开发环境，享受MCP插件带来的AI辅助开发体验！*
